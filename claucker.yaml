# Claucker Configuration
# Documentation: https://github.com/schmitthub/claucker

version: "1"
project: "workspace"

build:
  # Base image for the container
  image: "buildpack-deps:bookworm-scm"
  # Optional: path to custom Dockerfile (relative to project root)
  # dockerfile: "docker/2.1.2/Dockerfile"
  # System packages to install (apt-get on Debian, apk on Alpine)
  packages:
    - git
    - curl
    - ripgrep
    - less
    - procps
    - sudo
    - fzf
    - zsh
    - man-db
    - unzip
    - gnupg2
    - iptables
    - ipset
    - iproute2
    - dnsutils
    - aggregate
    - jq
    - nano
    - vim
    - wget
    - curl
    - gh
    - locales
    - locales-all
  instructions:
    root_run:
      - cmd: |
          install -m 0755 -d /etc/apt/keyrings && \
            curl -fsSL https://download.docker.com/linux/debian/gpg -o /etc/apt/keyrings/docker.asc && \
            chmod a+r /etc/apt/keyrings/docker.asc && \
            echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian $(. /etc/os-release && echo \"$VERSION_CODENAME\") stable" > /etc/apt/sources.list.d/docker.list && \
            apt-get update && \
            apt-get install -y --no-install-recommends docker-ce-cli docker-buildx-plugin docker-compose-plugin && \
            apt-get clean && rm -rf /var/lib/apt/lists/*
      - cmd: |
          curl -fsSL https://go.dev/dl/go1.23.4.linux-amd64.tar.gz | tar -C /usr/local -xzf - && \
            ln -s /usr/local/go/bin/go /usr/local/bin/go && \
            ln -s /usr/local/go/bin/gofmt /usr/local/bin/gofmt

agent:
  # Files to make available to Claude (prompts, docs, memory)
  includes:
    - "./README.md"
    # - "./.claude/memory.md"
  # Environment variables for the agent
  env:
    # NODE_ENV: "development"

workspace:
  # Container path where your code is mounted
  remote_path: "/workspace"
  # Default mode: "bind" (live sync) or "snapshot" (isolated copy)
  default_mode: "bind"

security:
  # Enable network firewall (blocks outbound traffic by default)
  enable_firewall: true
  # Mount Docker socket for Docker-in-Docker (security risk if enabled)
  docker_socket: false
  # Domains allowed through firewall (only when enable_firewall: true)
  # allowed_domains:
  #   - "api.github.com"
  #   - "registry.npmjs.org"
