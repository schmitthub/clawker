# Test container inspect command
# Verifies: detailed container information is returned

# Register cleanup
defer clawker container rm --force --agent inspect-$RANDOM_STRING
defer clawker container stop --agent inspect-$RANDOM_STRING

# Start a container
exec clawker container run --detach --agent inspect-$RANDOM_STRING alpine:latest sleep 3600
wait_container_running clawker.$PROJECT.inspect-$RANDOM_STRING 30

# Basic inspect (JSON output)
exec clawker container inspect --agent inspect-$RANDOM_STRING
stdout 'clawker.'$PROJECT'.inspect-'$RANDOM_STRING

# Inspect with format flag
exec clawker container inspect --format '{{.State.Status}}' --agent inspect-$RANDOM_STRING
stdout 'running'

# Inspect with image format
exec clawker container inspect --format '{{.Config.Image}}' --agent inspect-$RANDOM_STRING
stdout 'alpine'

-- clawker.yaml --
version: "1"

build:
  image: "alpine:latest"

security:
  firewall:
    enable: false
