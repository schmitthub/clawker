# Test image prune command
# Verifies: dangling images are removed by prune

# Build a test image
exec clawker image build --tag test-img-prune-$RANDOM_STRING:latest

# Verify image exists
exec clawker image ls
stdout 'test-img-prune-'$RANDOM_STRING

# Prune (with --all to remove unused images, not just dangling)
# The image should be removed since it's not used by any container
exec clawker image prune --force --all

# Verify image is removed
exec clawker image ls
! stdout 'test-img-prune-'$RANDOM_STRING

-- clawker.yaml --
version: "1"

build:
  image: "alpine:latest"

security:
  firewall:
    enable: false
