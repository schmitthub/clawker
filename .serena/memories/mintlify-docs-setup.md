# Mintlify Documentation Site Setup

## End Goal
Set up a Mintlify-powered documentation site for clawker at `docs.clawker.dev`, with source in the `docs/` directory of the main repo.

## Branch
`feat/web`

## Plan File
`/Users/andrew/.claude/plans/peaceful-exploring-quilt.md`

## Background Context
- Clawker needs user-facing docs at docs.clawker.dev
- Mintlify chosen for: auto llms.txt, copy-as-markdown, free OSS tier, same as Claude Code docs
- Hosting: Mintlify-hosted with CNAME from Cloudflare DNS
- docs/ directory previously had developer-facing content + 82 auto-generated CLI reference files

## Lessons Learned
- Mintlify parses ALL .md files as MDX — bare `<word>` angle brackets cause JSX parsing errors
- No Mintlify config to disable MDX parsing per-file — must escape at source
- CLI reference files are auto-generated by `go run ./cmd/gen-docs` — never edit them directly
- Fixed by adding MDX-safe generation functions to `internal/docs/markdown.go` and repurposing `--website` flag from Jekyll to Mintlify
- Mintlify supports nested groups within groups for collapsible sidebar sections
- deepwiki MCP is the go-to for Mintlify/Cobra doc questions (mintlify/docs repo)
- Mintlify config filename is `docs.json` (not mint.json — that's legacy)
- Required fields: `theme`, `name`, `colors.primary`, `navigation`
- Favicon is optional — removed it since no logo assets exist yet

## What Has Been Done

### Step 1: docs/docs.json — DONE
- Mintlify config with theme (mint), colors (#D97757 Claude orange), contextual features (copy/view/claude)
- Navbar with GitHub link + Install button, footer with GitHub social
- Navigation with nested groups: Getting Started, Guides, CLI Reference (with collapsible sub-groups: Top-Level Shortcuts, Container, Image, Volume, Network, Worktree, Loop, Monitor, Project, Config), Contributing

### Step 2: docs/index.mdx — DONE
- Homepage with CardGroup linking to quickstart, installation, config, CLI reference
- Feature overview and "How It Works" section

### Step 3: Starter MDX pages — DONE
- `docs/quickstart.mdx` — Install + first run with Steps component
- `docs/installation.mdx` — Homebrew, curl, source build methods
- `docs/configuration.mdx` — Full clawker.yaml reference with section explanations

### Step 4: Frontmatter on existing docs — DONE
- `docs/architecture.md`, `docs/design.md`, `docs/testing.md` all have Mintlify frontmatter

### Step 5: Gen-docs enhanced for Mintlify — DONE
- `internal/docs/markdown.go`: Added `EscapeMDXProse()`, `GenMarkdownWebsite()`, `GenMarkdownTreeWebsite()`
- `cmd/gen-docs/main.go`: `--website` flag repurposed from Jekyll to Mintlify (mintlifyFilePrepender, mintlifyLinkHandler)
- Tests updated in both `internal/docs/markdown_test.go` and `cmd/gen-docs/main_test.go`
- All 40 tests pass across both packages

### Step 6: CLI reference regenerated — DONE
- `go run ./cmd/gen-docs --doc-path docs --markdown --website` — all 82 files with Mintlify frontmatter + MDX-safe prose

### Step 7: docs/README.md deleted — DONE
- Replaced by index.mdx

### Step 8: Local preview verified — DONE
- `mintlify dev` starts clean, no parsing errors, all pages return HTTP 200
- Mintlify CLI installed globally via npm

## Remaining TODOs

- [x] **Deployment setup** — Researched: Mintlify-hosted via GitHub App auto-deploy, CNAME to cname.vercel-dns.com via Cloudflare. Manual dashboard steps only, no code changes needed.
- [x] **Update CLAUDE.md** — Added `--website` flag to Build Commands, added Mintlify Documentation Site subsection to Documentation section
- [x] **Update internal/docs/CLAUDE.md** — Documented `GenMarkdownWebsite`, `GenMarkdownTreeWebsite`, `EscapeMDXProse` exports and `--website` usage
- [x] **Run `make test`** — 4231 tests pass, 5 skipped (expected integration/debug tests)
- [x] **Theming — align docs.clawker.dev with clawker.dev design** — Updated docs.json: maple theme, dark-only (strict), amber palette (#f59e0b), Fontshare fonts (Clash Display headings + Satoshi body), grid background decoration, Home navbar link, website footer. Created docs/custom.css with surface colors (#111113 sidebar/cards/footer, #1a1a1f code blocks), glassmorphism navbar, amber card hover glow, monospace font stack, subtle borders. Updated index.mdx card icons to terminal-themed (terminal, square-terminal, sliders, code).
- [ ] **Logo/favicon assets** — Create and add to docs/images/ when available (future)
- [ ] **Full user guides** — Security, worktrees, monitoring, loop mode (future content)
- [ ] **Commit all changes** — All changes remain unstaged on feat/web branch
- [ ] **Dashboard setup** — Sign up at dashboard.mintlify.com, install GitHub App, configure /docs path, set custom domain docs.clawker.dev

## Status
All code work is complete. Theming aligned with clawker.dev (dark terminal aesthetic, amber accents, Fontshare fonts). Remaining items are manual (Mintlify dashboard, DNS, content authoring) or future work.

## IMPERATIVE
Always check with the user before proceeding with the next todo item. If all work is done, ask the user if they want to delete this memory.
