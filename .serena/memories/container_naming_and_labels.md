# Container Naming and Labels System

## Naming Convention

### Container Names
Format: `claucker.project.agent`
- Example: `claucker.myapp.ralph`, `claucker.backend.worker-1`
- Generated by: `engine.ContainerName(project, agent) string`
- Parsed by: `engine.ParseContainerName(name) (project, agent string, ok bool)`

### Volume Names
Format: `claucker.project.agent-purpose`
- Purposes: `workspace`, `config`, `history`
- Example: `claucker.myapp.ralph-workspace`
- Generated by: `engine.VolumeName(project, agent, purpose) string`

### Random Agent Names
When `--agent` flag not provided:
- Generated by: `engine.GenerateRandomName() string`
- Format: adjective-noun (e.g., "clever-fox", "swift-panda")
- Uses predefined lists in `internal/engine/names.go`

## Docker Labels

All claucker-managed resources use `com.claucker.*` labels:

### Container Labels
| Constant | Label Key | Example Value |
|----------|-----------|---------------|
| `LabelManaged` | `com.claucker.managed` | `true` |
| `LabelProject` | `com.claucker.project` | `myapp` |
| `LabelAgent` | `com.claucker.agent` | `ralph` |
| `LabelVersion` | `com.claucker.version` | `1.0.0` |
| `LabelImage` | `com.claucker.image` | `claucker-myapp:dev` |
| `LabelWorkdir` | `com.claucker.workdir` | `/Users/dev/myapp` |
| `LabelCreated` | `com.claucker.created` | RFC3339 timestamp |

### Volume Labels
| Constant | Label Key | Example Value |
|----------|-----------|---------------|
| `LabelManaged` | `com.claucker.managed` | `true` |
| `LabelProject` | `com.claucker.project` | `myapp` |
| `LabelAgent` | `com.claucker.agent` | `ralph` |
| `LabelPurpose` | `com.claucker.purpose` | `workspace` |

## Helper Functions (internal/engine/labels.go)

```go
// Create labels for new resources
ContainerLabels(project, agent, version, image, workdir string) map[string]string
VolumeLabels(project, agent, purpose string) map[string]string

// Docker filter args for listing
ClauckerFilter() filters.Args           // all claucker resources
ProjectFilter(project string) filters.Args  // specific project
AgentFilter(project, agent string) filters.Args  // specific agent
```

## Listing Containers (internal/engine/client.go)

```go
// ClauckerContainer holds parsed container info
type ClauckerContainer struct {
    ID, Name, Project, Agent, Image, Workdir, Status string
    Created int64
}

// Listing methods
ListClauckerContainers(includeAll bool) ([]ClauckerContainer, error)
ListClauckerContainersByProject(project string, includeAll bool) ([]ClauckerContainer, error)
RemoveContainerWithVolumes(containerID string, force bool) error
```

## Usage Pattern

Commands that work with agents follow this pattern:
1. If `--agent` specified: use `ContainerName(project, agent)` directly
2. If no `--agent`: call `ListClauckerContainersByProject(project, ...)`
   - If 0 containers: error with guidance
   - If 1 container: use it
   - If >1 containers: error asking user to specify `--agent`
