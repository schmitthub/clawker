# Lightweight Alpine test image for integration testing clawker scripts
# This image is ~50MB and includes basic tools needed for script testing
FROM alpine:3.21

# Install essential tools
RUN apk add --no-cache \
    bash \
    curl \
    jq \
    git \
    iptables \
    openssh-client \
    openssl \
    coreutils \
    grep \
    sed \
    procps

# Create claude user (matches production containers)
RUN adduser -D -s /bin/bash -h /home/claude claude

# Create standard directories
RUN mkdir -p /var/run/clawker \
    && mkdir -p /home/claude/.ssh \
    && mkdir -p /home/claude/.claude \
    && mkdir -p /workspace \
    && chown -R claude:claude /home/claude /var/run/clawker /workspace

# Default to claude user
USER claude
WORKDIR /workspace

# Keep container running for test exec
CMD ["sleep", "infinity"]
