# Test user flag (-u/--user)
# Verifies: Container runs as specified user

# Substitute project name in config
replace clawker.yaml PROJECT=$PROJECT

# Create settings directory
mkdir $HOME/.local/clawker

# Test -u shorthand with root
exec clawker container run --rm -u root alpine:latest whoami
stdout 'root'

# Test --user long form with UID
exec clawker container run --rm --user 0 alpine:latest id -u
stdout '0'

-- clawker.yaml --
version: "1"
project: "$PROJECT"

build:
  image: "alpine:latest"

security:
  firewall:
    enable: false
