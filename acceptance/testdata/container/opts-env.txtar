# Test environment variable passing via -e/--env flag
# Verifies: Environment variables are passed to container and accessible

# Substitute project name in config
replace clawker.yaml PROJECT=$PROJECT

# Create settings directory
mkdir $HOME/.local/clawker

# Test single environment variable with -e
exec clawker container run --rm -e TEST_VAR=hello alpine:latest printenv TEST_VAR
stdout 'hello'

# Test multiple environment variables
exec clawker container run --rm -e VAR1=first -e VAR2=second alpine:latest sh -c 'echo $VAR1-$VAR2'
stdout 'first-second'

# Test --env long form
exec clawker container run --rm --env LONG_FORM=works alpine:latest printenv LONG_FORM
stdout 'works'

-- clawker.yaml --
version: "1"
project: "$PROJECT"

build:
  image: "alpine:latest"

security:
  firewall:
    enable: false
