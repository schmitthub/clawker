# Test block IO weight validation (--blkio-weight range)
# Verifies: Invalid blkio-weight values are rejected

# Substitute project name in config
replace clawker.yaml PROJECT=$PROJECT

# Create settings directory
mkdir $HOME/.local/clawker

# Test below minimum (valid range is 10-1000)
! exec clawker container create --agent blkv-$RANDOM_STRING --blkio-weight 5 alpine:latest sleep 3600
stderr -count=1 '.'

# Test above maximum
! exec clawker container create --agent blkv2-$RANDOM_STRING --blkio-weight 1500 alpine:latest sleep 3600
stderr -count=1 '.'

-- clawker.yaml --
version: "1"
project: "$PROJECT"

build:
  image: "alpine:latest"

security:
  firewall:
    enable: false
